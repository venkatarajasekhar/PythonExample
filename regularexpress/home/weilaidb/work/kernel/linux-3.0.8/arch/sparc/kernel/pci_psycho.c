#define DRIVER_NAME	"psycho"
#define PFX		DRIVER_NAME ": "
#define PSYCHO_CONTROL		0x0010UL
#define  PSYCHO_CONTROL_IMPL	 0xf000000000000000UL
#define  PSYCHO_CONTROL_VER	 0x0f00000000000000UL
#define  PSYCHO_CONTROL_MID	 0x00f8000000000000UL
#define  PSYCHO_CONTROL_IGN	 0x0007c00000000000UL
#define  PSYCHO_CONTROL_RESV     0x00003ffffffffff0UL
#define  PSYCHO_CONTROL_APCKEN	 0x0000000000000008UL
#define  PSYCHO_CONTROL_APERR	 0x0000000000000004UL
#define  PSYCHO_CONTROL_IAP	 0x0000000000000002UL
#define  PSYCHO_CONTROL_MODE	 0x0000000000000001UL
#define PSYCHO_PCIA_CTRL	0x2000UL
#define PSYCHO_PCIB_CTRL	0x4000UL
#define  PSYCHO_PCICTRL_RESV1	 0xfffffff000000000UL
#define  PSYCHO_PCICTRL_SBH_ERR	 0x0000000800000000UL
#define  PSYCHO_PCICTRL_SERR	 0x0000000400000000UL
#define  PSYCHO_PCICTRL_SPEED	 0x0000000200000000UL
#define  PSYCHO_PCICTRL_RESV2	 0x00000001ffc00000UL
#define  PSYCHO_PCICTRL_ARB_PARK 0x0000000000200000UL
#define  PSYCHO_PCICTRL_RESV3	 0x00000000001ff800UL
#define  PSYCHO_PCICTRL_SBH_INT	 0x0000000000000400UL
#define  PSYCHO_PCICTRL_WEN	 0x0000000000000200UL
#define  PSYCHO_PCICTRL_EEN	 0x0000000000000100UL
#define  PSYCHO_PCICTRL_RESV4	 0x00000000000000c0UL
#define  PSYCHO_PCICTRL_AEN	 0x000000000000003fUL
#define PSYCHO_STRBUF_CONTROL_A 0x2800UL
#define PSYCHO_STRBUF_CONTROL_B 0x4800UL
#define  PSYCHO_STRBUF_CTRL_LPTR    0x00000000000000f0UL
#define  PSYCHO_STRBUF_CTRL_LENAB   0x0000000000000008UL
#define  PSYCHO_STRBUF_CTRL_RRDIS   0x0000000000000004UL
#define  PSYCHO_STRBUF_CTRL_DENAB   0x0000000000000002UL
#define  PSYCHO_STRBUF_CTRL_ENAB    0x0000000000000001UL
#define PSYCHO_STRBUF_FLUSH_A   0x2808UL
#define PSYCHO_STRBUF_FLUSH_B   0x4808UL
#define PSYCHO_STRBUF_FSYNC_A   0x2810UL
#define PSYCHO_STRBUF_FSYNC_B   0x4810UL
#define PSYCHO_STC_DATA_A	0xb000UL
#define PSYCHO_STC_DATA_B	0xc000UL
#define PSYCHO_STC_ERR_A	0xb400UL
#define PSYCHO_STC_ERR_B	0xc400UL
#define PSYCHO_STC_TAG_A	0xb800UL
#define PSYCHO_STC_TAG_B	0xc800UL
#define PSYCHO_STC_LINE_A	0xb900UL
#define PSYCHO_STC_LINE_B	0xc900UL
#define PSYCHO_IOMMU_CONTROL	0x0200UL
#define  PSYCHO_IOMMU_CTRL_RESV     0xfffffffff9000000UL
#define  PSYCHO_IOMMU_CTRL_XLTESTAT 0x0000000006000000UL
#define  PSYCHO_IOMMU_CTRL_XLTEERR  0x0000000001000000UL
#define  PSYCHO_IOMMU_CTRL_LCKEN    0x0000000000800000UL
#define  PSYCHO_IOMMU_CTRL_LCKPTR   0x0000000000780000UL
#define  PSYCHO_IOMMU_CTRL_TSBSZ    0x0000000000070000UL
#define  PSYCHO_IOMMU_TSBSZ_1K      0x0000000000000000UL
#define  PSYCHO_IOMMU_TSBSZ_2K      0x0000000000010000UL
#define  PSYCHO_IOMMU_TSBSZ_4K      0x0000000000020000UL
#define  PSYCHO_IOMMU_TSBSZ_8K      0x0000000000030000UL
#define  PSYCHO_IOMMU_TSBSZ_16K     0x0000000000040000UL
#define  PSYCHO_IOMMU_TSBSZ_32K     0x0000000000050000UL
#define  PSYCHO_IOMMU_TSBSZ_64K     0x0000000000060000UL
#define  PSYCHO_IOMMU_TSBSZ_128K    0x0000000000070000UL
#define  PSYCHO_IOMMU_CTRL_RESV2    0x000000000000fff8UL
#define  PSYCHO_IOMMU_CTRL_TBWSZ    0x0000000000000004UL
#define  PSYCHO_IOMMU_CTRL_DENAB    0x0000000000000002UL
#define  PSYCHO_IOMMU_CTRL_ENAB     0x0000000000000001UL
#define PSYCHO_IOMMU_TSBBASE	0x0208UL
#define PSYCHO_IOMMU_FLUSH	0x0210UL
#define PSYCHO_IOMMU_TAG	0xa580UL
#define PSYCHO_IOMMU_DATA	0xa600UL
#define PSYCHO_UE_AFSR	0x0030UL
#define  PSYCHO_UEAFSR_PPIO	0x8000000000000000UL
#define  PSYCHO_UEAFSR_PDRD	0x4000000000000000UL
#define  PSYCHO_UEAFSR_PDWR	0x2000000000000000UL
#define  PSYCHO_UEAFSR_SPIO	0x1000000000000000UL
#define  PSYCHO_UEAFSR_SDRD	0x0800000000000000UL
#define  PSYCHO_UEAFSR_SDWR	0x0400000000000000UL
#define  PSYCHO_UEAFSR_RESV1	0x03ff000000000000UL
#define  PSYCHO_UEAFSR_BMSK	0x0000ffff00000000UL
#define  PSYCHO_UEAFSR_DOFF	0x00000000e0000000UL
#define  PSYCHO_UEAFSR_MID	0x000000001f000000UL
#define  PSYCHO_UEAFSR_BLK	0x0000000000800000UL
#define  PSYCHO_UEAFSR_RESV2	0x00000000007fffffUL
#define PSYCHO_UE_AFAR	0x0038UL
static irqreturn_t psycho_ue_intr(int irq, void *dev_id)
#define PSYCHO_CE_AFSR	0x0040UL
#define  PSYCHO_CEAFSR_PPIO	0x8000000000000000UL
#define  PSYCHO_CEAFSR_PDRD	0x4000000000000000UL
#define  PSYCHO_CEAFSR_PDWR	0x2000000000000000UL
#define  PSYCHO_CEAFSR_SPIO	0x1000000000000000UL
#define  PSYCHO_CEAFSR_SDRD	0x0800000000000000UL
#define  PSYCHO_CEAFSR_SDWR	0x0400000000000000UL
#define  PSYCHO_CEAFSR_RESV1	0x0300000000000000UL
#define  PSYCHO_CEAFSR_ESYND	0x00ff000000000000UL
#define  PSYCHO_CEAFSR_BMSK	0x0000ffff00000000UL
#define  PSYCHO_CEAFSR_DOFF	0x00000000e0000000UL
#define  PSYCHO_CEAFSR_MID	0x000000001f000000UL
#define  PSYCHO_CEAFSR_BLK	0x0000000000800000UL
#define  PSYCHO_CEAFSR_RESV2	0x00000000007fffffUL
#define PSYCHO_CE_AFAR	0x0040UL
static irqreturn_t psycho_ce_intr(int irq, void *dev_id)
#define PSYCHO_PCI_AFSR_A	0x2010UL
#define PSYCHO_PCI_AFSR_B	0x4010UL
#define PSYCHO_PCI_AFAR_A	0x2018UL
#define PSYCHO_PCI_AFAR_B	0x4018UL
#define PSYCHO_ECC_CTRL		0x0020
#define  PSYCHO_ECCCTRL_EE	 0x8000000000000000UL
#define  PSYCHO_ECCCTRL_UE	 0x4000000000000000UL
#define  PSYCHO_ECCCTRL_CE	 0x2000000000000000UL
static void psycho_register_error_handlers(struct pci_pbm_info *pbm)
static void pbm_config_busmastering(struct pci_pbm_info *pbm)
static void __devinit psycho_scan_bus(struct pci_pbm_info *pbm,
struct device *parent)
#define PSYCHO_IRQ_RETRY	0x1a00UL
#define PSYCHO_PCIA_DIAG	0x2020UL
#define PSYCHO_PCIB_DIAG	0x4020UL
#define  PSYCHO_PCIDIAG_RESV	 0xffffffffffffff80UL
#define  PSYCHO_PCIDIAG_DRETRY	 0x0000000000000040UL
#define  PSYCHO_PCIDIAG_DISYNC	 0x0000000000000020UL
#define  PSYCHO_PCIDIAG_DDWSYNC	 0x0000000000000010UL
#define  PSYCHO_PCIDIAG_IDDPAR	 0x0000000000000008UL
#define  PSYCHO_PCIDIAG_IPDPAR	 0x0000000000000004UL
#define  PSYCHO_PCIDIAG_IPAPAR	 0x0000000000000002UL
#define  PSYCHO_PCIDIAG_LPBACK	 0x0000000000000001UL
static void psycho_controller_hwinit(struct pci_pbm_info *pbm)
static void psycho_pbm_strbuf_init(struct pci_pbm_info *pbm,
int is_pbm_a)
#define PSYCHO_IOSPACE_A	0x002000000UL
#define PSYCHO_IOSPACE_B	0x002010000UL
#define PSYCHO_IOSPACE_SIZE	0x00000ffffUL
#define PSYCHO_MEMSPACE_A	0x100000000UL
#define PSYCHO_MEMSPACE_B	0x180000000UL
#define PSYCHO_MEMSPACE_SIZE	0x07fffffffUL
static void __devinit psycho_pbm_init(struct pci_pbm_info *pbm,
struct platform_device *op, int is_pbm_a)
static struct pci_pbm_info * __devinit psycho_find_sibling(u32 upa_portid)
#define PSYCHO_CONFIGSPACE	0x001000000UL
static int __devinit psycho_probe(struct platform_device *op)
static const struct of_device_id psycho_match[] = ;
static struct platform_driver psycho_driver = ;
static int __init psycho_init(void)
subsys_initcall(psycho_init);
