#define DRIVER_NAME	"sabre"
#define PFX		DRIVER_NAME ": "
#define SABRE_UE_AFSR		0x0030UL
#define  SABRE_UEAFSR_PDRD	 0x4000000000000000UL
#define  SABRE_UEAFSR_PDWR	 0x2000000000000000UL
#define  SABRE_UEAFSR_SDRD	 0x0800000000000000UL
#define  SABRE_UEAFSR_SDWR	 0x0400000000000000UL
#define  SABRE_UEAFSR_SDTE	 0x0200000000000000UL
#define  SABRE_UEAFSR_PDTE	 0x0100000000000000UL
#define  SABRE_UEAFSR_BMSK	 0x0000ffff00000000UL
#define  SABRE_UEAFSR_OFF	 0x00000000e0000000UL
#define  SABRE_UEAFSR_BLK	 0x0000000000800000UL
#define SABRE_UECE_AFAR		0x0038UL
#define SABRE_CE_AFSR		0x0040UL
#define  SABRE_CEAFSR_PDRD	 0x4000000000000000UL
#define  SABRE_CEAFSR_PDWR	 0x2000000000000000UL
#define  SABRE_CEAFSR_SDRD	 0x0800000000000000UL
#define  SABRE_CEAFSR_SDWR	 0x0400000000000000UL
#define  SABRE_CEAFSR_ESYND	 0x00ff000000000000UL
#define  SABRE_CEAFSR_BMSK	 0x0000ffff00000000UL
#define  SABRE_CEAFSR_OFF	 0x00000000e0000000UL
#define  SABRE_CEAFSR_BLK	 0x0000000000800000UL
#define SABRE_UECE_AFAR_ALIAS	0x0048UL
#define SABRE_IOMMU_CONTROL	0x0200UL
#define  SABRE_IOMMUCTRL_ERRSTS	 0x0000000006000000UL
#define  SABRE_IOMMUCTRL_ERR	 0x0000000001000000UL
#define  SABRE_IOMMUCTRL_LCKEN	 0x0000000000800000UL
#define  SABRE_IOMMUCTRL_LCKPTR	 0x0000000000780000UL
#define  SABRE_IOMMUCTRL_TSBSZ	 0x0000000000070000UL
#define  SABRE_IOMMU_TSBSZ_1K   0x0000000000000000
#define  SABRE_IOMMU_TSBSZ_2K   0x0000000000010000
#define  SABRE_IOMMU_TSBSZ_4K   0x0000000000020000
#define  SABRE_IOMMU_TSBSZ_8K   0x0000000000030000
#define  SABRE_IOMMU_TSBSZ_16K  0x0000000000040000
#define  SABRE_IOMMU_TSBSZ_32K  0x0000000000050000
#define  SABRE_IOMMU_TSBSZ_64K  0x0000000000060000
#define  SABRE_IOMMU_TSBSZ_128K 0x0000000000070000
#define  SABRE_IOMMUCTRL_TBWSZ	 0x0000000000000004UL
#define  SABRE_IOMMUCTRL_DENAB	 0x0000000000000002UL
#define  SABRE_IOMMUCTRL_ENAB	 0x0000000000000001UL
#define SABRE_IOMMU_TSBBASE	0x0208UL
#define SABRE_IOMMU_FLUSH	0x0210UL
#define SABRE_IMAP_A_SLOT0	0x0c00UL
#define SABRE_IMAP_B_SLOT0	0x0c20UL
#define SABRE_IMAP_SCSI		0x1000UL
#define SABRE_IMAP_ETH		0x1008UL
#define SABRE_IMAP_BPP		0x1010UL
#define SABRE_IMAP_AU_REC	0x1018UL
#define SABRE_IMAP_AU_PLAY	0x1020UL
#define SABRE_IMAP_PFAIL	0x1028UL
#define SABRE_IMAP_KMS		0x1030UL
#define SABRE_IMAP_FLPY		0x1038UL
#define SABRE_IMAP_SHW		0x1040UL
#define SABRE_IMAP_KBD		0x1048UL
#define SABRE_IMAP_MS		0x1050UL
#define SABRE_IMAP_SER		0x1058UL
#define SABRE_IMAP_UE		0x1070UL
#define SABRE_IMAP_CE		0x1078UL
#define SABRE_IMAP_PCIERR	0x1080UL
#define SABRE_IMAP_GFX		0x1098UL
#define SABRE_IMAP_EUPA		0x10a0UL
#define SABRE_ICLR_A_SLOT0	0x1400UL
#define SABRE_ICLR_B_SLOT0	0x1480UL
#define SABRE_ICLR_SCSI		0x1800UL
#define SABRE_ICLR_ETH		0x1808UL
#define SABRE_ICLR_BPP		0x1810UL
#define SABRE_ICLR_AU_REC	0x1818UL
#define SABRE_ICLR_AU_PLAY	0x1820UL
#define SABRE_ICLR_PFAIL	0x1828UL
#define SABRE_ICLR_KMS		0x1830UL
#define SABRE_ICLR_FLPY		0x1838UL
#define SABRE_ICLR_SHW		0x1840UL
#define SABRE_ICLR_KBD		0x1848UL
#define SABRE_ICLR_MS		0x1850UL
#define SABRE_ICLR_SER		0x1858UL
#define SABRE_ICLR_UE		0x1870UL
#define SABRE_ICLR_CE		0x1878UL
#define SABRE_ICLR_PCIERR	0x1880UL
#define SABRE_WRSYNC		0x1c20UL
#define SABRE_PCICTRL		0x2000UL
#define  SABRE_PCICTRL_MRLEN	 0x0000001000000000UL
#define  SABRE_PCICTRL_SERR	 0x0000000400000000UL
#define  SABRE_PCICTRL_ARBPARK	 0x0000000000200000UL
#define  SABRE_PCICTRL_CPUPRIO	 0x0000000000100000UL
#define  SABRE_PCICTRL_ARBPRIO	 0x00000000000f0000UL
#define  SABRE_PCICTRL_ERREN	 0x0000000000000100UL
#define  SABRE_PCICTRL_RTRYWE	 0x0000000000000080UL
#define  SABRE_PCICTRL_AEN	 0x000000000000000fUL
#define SABRE_PIOAFSR		0x2010UL
#define  SABRE_PIOAFSR_PMA	 0x8000000000000000UL
#define  SABRE_PIOAFSR_PTA	 0x4000000000000000UL
#define  SABRE_PIOAFSR_PRTRY	 0x2000000000000000UL
#define  SABRE_PIOAFSR_PPERR	 0x1000000000000000UL
#define  SABRE_PIOAFSR_SMA	 0x0800000000000000UL
#define  SABRE_PIOAFSR_STA	 0x0400000000000000UL
#define  SABRE_PIOAFSR_SRTRY	 0x0200000000000000UL
#define  SABRE_PIOAFSR_SPERR	 0x0100000000000000UL
#define  SABRE_PIOAFSR_BMSK	 0x0000ffff00000000UL
#define  SABRE_PIOAFSR_BLK	 0x0000000080000000UL
#define SABRE_PIOAFAR		0x2018UL
#define SABRE_PCIDIAG		0x2020UL
#define  SABRE_PCIDIAG_DRTRY	 0x0000000000000040UL
#define  SABRE_PCIDIAG_IPAPAR	 0x0000000000000008UL
#define  SABRE_PCIDIAG_IPDPAR	 0x0000000000000004UL
#define  SABRE_PCIDIAG_IDDPAR	 0x0000000000000002UL
#define  SABRE_PCIDIAG_ELPBK	 0x0000000000000001UL
#define SABRE_PCITASR		0x2028UL
#define  SABRE_PCITASR_EF	 0x0000000000000080UL
#define  SABRE_PCITASR_CD	 0x0000000000000040UL
#define  SABRE_PCITASR_AB	 0x0000000000000020UL
#define  SABRE_PCITASR_89	 0x0000000000000010UL
#define  SABRE_PCITASR_67	 0x0000000000000008UL
#define  SABRE_PCITASR_45	 0x0000000000000004UL
#define  SABRE_PCITASR_23	 0x0000000000000002UL
#define  SABRE_PCITASR_01	 0x0000000000000001UL
#define SABRE_PIOBUF_DIAG	0x5000UL
#define SABRE_DMABUF_DIAGLO	0x5100UL
#define SABRE_DMABUF_DIAGHI	0x51c0UL
#define SABRE_IMAP_GFX_ALIAS	0x6000UL
#define SABRE_IMAP_EUPA_ALIAS	0x8000UL
#define SABRE_IOMMU_VADIAG	0xa400UL
#define SABRE_IOMMU_TCDIAG	0xa408UL
#define SABRE_IOMMU_TAG		0xa580UL
#define  SABRE_IOMMUTAG_ERRSTS	 0x0000000001800000UL
#define  SABRE_IOMMUTAG_ERR	 0x0000000000400000UL
#define  SABRE_IOMMUTAG_WRITE	 0x0000000000200000UL
#define  SABRE_IOMMUTAG_STREAM	 0x0000000000100000UL
#define  SABRE_IOMMUTAG_SIZE	 0x0000000000080000UL
#define  SABRE_IOMMUTAG_VPN	 0x000000000007ffffUL
#define SABRE_IOMMU_DATA	0xa600UL
#define SABRE_IOMMUDATA_VALID	 0x0000000040000000UL
#define SABRE_IOMMUDATA_USED	 0x0000000020000000UL
#define SABRE_IOMMUDATA_CACHE	 0x0000000010000000UL
#define SABRE_IOMMUDATA_PPN	 0x00000000001fffffUL
#define SABRE_PCI_IRQSTATE	0xa800UL
#define SABRE_OBIO_IRQSTATE	0xa808UL
#define SABRE_FFBCFG		0xf000UL
#define  SABRE_FFBCFG_SPRQS	 0x000000000f000000
#define  SABRE_FFBCFG_ONEREAD	 0x0000000000004000
#define SABRE_MCCTRL0		0xf010UL
#define  SABRE_MCCTRL0_RENAB	 0x0000000080000000
#define  SABRE_MCCTRL0_EENAB	 0x0000000010000000
#define  SABRE_MCCTRL0_11BIT	 0x0000000000001000
#define  SABRE_MCCTRL0_DPP	 0x0000000000000f00
#define  SABRE_MCCTRL0_RINTVL	 0x00000000000000ff
#define SABRE_MCCTRL1		0xf018UL
#define  SABRE_MCCTRL1_AMDC	 0x0000000038000000
#define  SABRE_MCCTRL1_ARDC	 0x0000000007000000
#define  SABRE_MCCTRL1_CSR	 0x0000000000e00000
#define  SABRE_MCCTRL1_CASRW	 0x00000000001c0000
#define  SABRE_MCCTRL1_RCD	 0x0000000000038000
#define  SABRE_MCCTRL1_CP	 0x0000000000007000
#define  SABRE_MCCTRL1_RP	 0x0000000000000e00
#define  SABRE_MCCTRL1_RAS	 0x00000000000001c0
#define  SABRE_MCCTRL1_CASRW2	 0x0000000000000038
#define  SABRE_MCCTRL1_RSC	 0x0000000000000007
#define SABRE_RESETCTRL		0xf020UL
#define SABRE_CONFIGSPACE	0x001000000UL
#define SABRE_IOSPACE		0x002000000UL
#define SABRE_IOSPACE_SIZE	0x000ffffffUL
#define SABRE_MEMSPACE		0x100000000UL
#define SABRE_MEMSPACE_SIZE	0x07fffffffUL
static int hummingbird_p;
static struct pci_bus *sabre_root_bus;
static irqreturn_t sabre_ue_intr(int irq, void *dev_id)
static irqreturn_t sabre_ce_intr(int irq, void *dev_id)
static void sabre_register_error_handlers(struct pci_pbm_info *pbm)
static void apb_init(struct pci_bus *sabre_bus)
static void __devinit sabre_scan_bus(struct pci_pbm_info *pbm,
struct device *parent)
static void __devinit sabre_pbm_init(struct pci_pbm_info *pbm,
struct platform_device *op)
static const struct of_device_id sabre_match[];
static int __devinit sabre_probe(struct platform_device *op)
static const struct of_device_id sabre_match[] = ;
static struct platform_driver sabre_driver = ;
static int __init sabre_init(void)
subsys_initcall(sabre_init);
