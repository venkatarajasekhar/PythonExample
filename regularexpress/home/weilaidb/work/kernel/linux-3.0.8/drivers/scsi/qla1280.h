#define	_QLA1280_H
#define BIT_0	0x1
#define BIT_1	0x2
#define BIT_2	0x4
#define BIT_3	0x8
#define BIT_4	0x10
#define BIT_5	0x20
#define BIT_6	0x40
#define BIT_7	0x80
#define BIT_8	0x100
#define BIT_9	0x200
#define BIT_10	0x400
#define BIT_11	0x800
#define BIT_12	0x1000
#define BIT_13	0x2000
#define BIT_14	0x4000
#define BIT_15	0x8000
#define BIT_16	0x10000
#define BIT_17	0x20000
#define BIT_18	0x40000
#define BIT_19	0x80000
#define BIT_20	0x100000
#define BIT_21	0x200000
#define BIT_22	0x400000
#define BIT_23	0x800000
#define BIT_24	0x1000000
#define BIT_25	0x2000000
#define BIT_26	0x4000000
#define BIT_27	0x8000000
#define BIT_28	0x10000000
#define BIT_29	0x20000000
#define BIT_30	0x40000000
#define BIT_31	0x80000000
#if MEMORY_MAPPED_IO
#define RD_REG_WORD(addr)		readw_relaxed(addr)
#define RD_REG_WORD_dmasync(addr)	readw(addr)
#define WRT_REG_WORD(addr, data)	writew(data, addr)
#define RD_REG_WORD(addr)		inw((unsigned long)addr)
#define RD_REG_WORD_dmasync(addr)	RD_REG_WORD(addr)
#define WRT_REG_WORD(addr, data)	outw(data, (unsigned long)addr)
#define MAX_BUSES	2
#define MAX_B_BITS	1
#define MAX_TARGETS	16
#define MAX_T_BITS	4
#define MAX_LUNS	8
#define MAX_L_BITS	3
#define QLA1280_WDG_TIME_QUANTUM	5
#define COMMAND_RETRY_COUNT		255
#define MAX_OUTSTANDING_COMMANDS	512
#define COMPLETED_HANDLE		((unsigned char *) \
(MAX_OUTSTANDING_COMMANDS + 2))
#define REQUEST_ENTRY_CNT		255
#define RESPONSE_ENTRY_CNT		63
struct srb ;
#define SRB_TIMEOUT		(1 << 0)
#define SRB_SENT		(1 << 1)
#define SRB_ABORT_PENDING	(1 << 2)
#define SRB_ABORTED		(1 << 3)
struct device_reg ;
#define MAILBOX_REGISTER_COUNT	8
#define PROD_ID_1		0x4953
#define PROD_ID_2		0x0000
#define PROD_ID_2a		0x5020
#define PROD_ID_3		0x2020
#define PROD_ID_4		0x1
#define HC_RESET_RISC		0x1000
#define HC_PAUSE_RISC		0x2000
#define HC_RELEASE_RISC		0x3000
#define HC_SET_HOST_INT		0x5000
#define HC_CLR_HOST_INT		0x6000
#define HC_CLR_RISC_INT		0x7000
#define HC_DISABLE_BIOS		0x9000
#define MBS_FRM_ALIVE		0
#define MBS_CHKSUM_ERR		1
#define MBS_SHADOW_LD_ERR	2
#define MBS_BUSY		4
#define MBS_CMD_CMP		0x4000
#define MBS_INV_CMD		0x4001
#define MBS_HOST_INF_ERR	0x4002
#define MBS_TEST_FAILED		0x4003
#define MBS_CMD_ERR		0x4005
#define MBS_CMD_PARAM_ERR	0x4006
#define MBA_ASYNC_EVENT		0x8000
#define MBA_BUS_RESET		0x8001
#define MBA_SYSTEM_ERR		0x8002
#define MBA_REQ_TRANSFER_ERR	0x8003
#define MBA_RSP_TRANSFER_ERR	0x8004
#define MBA_WAKEUP_THRES	0x8005
#define MBA_TIMEOUT_RESET	0x8006
#define MBA_DEVICE_RESET	0x8007
#define MBA_BUS_MODE_CHANGE	0x800E
#define MBA_SCSI_COMPLETION	0x8020
#define MBC_NOP				0
#define MBC_LOAD_RAM			1
#define MBC_EXECUTE_FIRMWARE		2
#define MBC_DUMP_RAM			3
#define MBC_WRITE_RAM_WORD		4
#define MBC_READ_RAM_WORD		5
#define MBC_MAILBOX_REGISTER_TEST	6
#define MBC_VERIFY_CHECKSUM		7
#define MBC_ABOUT_FIRMWARE		8
#define MBC_INIT_REQUEST_QUEUE		0x10
#define MBC_INIT_RESPONSE_QUEUE		0x11
#define MBC_EXECUTE_IOCB		0x12
#define MBC_ABORT_COMMAND		0x15
#define MBC_ABORT_DEVICE		0x16
#define MBC_ABORT_TARGET		0x17
#define MBC_BUS_RESET			0x18
#define MBC_GET_RETRY_COUNT		0x22
#define MBC_GET_TARGET_PARAMETERS	0x28
#define MBC_SET_INITIATOR_ID		0x30
#define MBC_SET_SELECTION_TIMEOUT	0x31
#define MBC_SET_RETRY_COUNT		0x32
#define MBC_SET_TAG_AGE_LIMIT		0x33
#define MBC_SET_CLOCK_RATE		0x34
#define MBC_SET_ACTIVE_NEGATION		0x35
#define MBC_SET_ASYNC_DATA_SETUP	0x36
#define MBC_SET_PCI_CONTROL		0x37
#define MBC_SET_TARGET_PARAMETERS	0x38
#define MBC_SET_DEVICE_QUEUE		0x39
#define MBC_SET_RESET_DELAY_PARAMETERS	0x3A
#define MBC_SET_SYSTEM_PARAMETER	0x45
#define MBC_SET_FIRMWARE_FEATURES	0x4A
#define MBC_INIT_REQUEST_QUEUE_A64	0x52
#define MBC_INIT_RESPONSE_QUEUE_A64	0x53
#define MBC_ENABLE_TARGET_MODE		0x55
#define MBC_SET_DATA_OVERRUN_RECOVERY	0x5A
#define TP_PPR			BIT_5
#define TP_RENEGOTIATE		BIT_8
#define TP_STOP_QUEUE           BIT_9
#define TP_AUTO_REQUEST_SENSE   BIT_10
#define TP_TAGGED_QUEUE         BIT_11
#define TP_SYNC                 BIT_12
#define TP_WIDE                 BIT_13
#define TP_PARITY               BIT_14
#define TP_DISCONNECT           BIT_15
#define NV_START_BIT		BIT_2
#define NV_WRITE_OP		(BIT_26 | BIT_24)
#define NV_READ_OP		(BIT_26 | BIT_25)
#define NV_ERASE_OP		(BIT_26 | BIT_25 | BIT_24)
#define NV_MASK_OP		(BIT_26 | BIT_25 | BIT_24)
#define NV_DELAY_COUNT		10
struct nvram ;
#define MAX_CMDSZ	12
struct cmd_entry ;
struct cont_entry ;
struct response ;
struct mrk_entry ;
struct ecmd_entry ;
typedef struct  cmd_a64_entry_t, request_t;
struct cont_a64_entry ;
struct elun_entry ;
struct modify_lun_entry ;
struct notify_entry ;
struct nack_entry ;
struct atio_entry ;
struct ctio_entry ;
struct ctio_ret_entry ;
struct ctio_a64_entry ;
struct ctio_a64_ret_entry ;
#define RESPONSE_ENTRY_SIZE	(sizeof(struct response))
#define REQUEST_ENTRY_SIZE	(sizeof(request_t))
#define CS_COMPLETE         0x0
#define CS_INCOMPLETE       0x1
#define CS_DMA              0x2
#define CS_TRANSPORT        0x3
#define CS_RESET            0x4
#define CS_ABORTED          0x5
#define CS_TIMEOUT          0x6
#define CS_DATA_OVERRUN     0x7
#define CS_COMMAND_OVERRUN  0x8
#define CS_STATUS_OVERRUN   0x9
#define CS_BAD_MSG          0xA
#define CS_NO_MSG_OUT       0xB
#define CS_EXTENDED_ID      0xC
#define CS_IDE_MSG          0xD
#define CS_ABORT_MSG        0xE
#define CS_REJECT_MSG       0xF
#define CS_NOP_MSG          0x10
#define CS_PARITY_MSG       0x11
#define CS_DEV_RESET_MSG    0x12
#define CS_ID_MSG           0x13
#define CS_FREE             0x14
#define CS_DATA_UNDERRUN    0x15
#define CS_TRANACTION_1     0x18
#define CS_TRANACTION_2     0x19
#define CS_TRANACTION_3     0x1a
#define CS_INV_ENTRY_TYPE   0x1b
#define CS_DEV_QUEUE_FULL   0x1c
#define CS_PHASED_SKIPPED   0x1d
#define CS_ARS_FAILED       0x1e
#define CS_LVD_BUS_ERROR    0x21
#define CS_BAD_PAYLOAD      0x80
#define CS_UNKNOWN          0x81
#define CS_RETRY            0x82
#define OF_ENABLE_TAG       BIT_1
#define OF_DATA_IN          BIT_6
#define OF_DATA_OUT         BIT_7
#define OF_NO_DATA          (BIT_7 | BIT_6)
#define OF_DISC_DISABLED    BIT_15
#define OF_DISABLE_SDP      BIT_24
#define OF_SEND_RDP         BIT_26
#define OF_FORCE_DISC       BIT_30
#define OF_SSTS             BIT_31
struct bus_param ;
struct qla_driver_setup ;
struct scsi_qla_host ;
